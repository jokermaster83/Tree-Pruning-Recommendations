## âœ‚ï¸ Pruning Recommendation System Based on 3D Branch Classification

æœ¬é¡¹ç›®åŸºäºæœæ ‘ææ¡çš„ä¸‰ç»´å±‚çº§åˆ†ç±»ç»“æœï¼Œç»“åˆ**å†œä¸šä¿®å‰ªè§„åˆ™**ï¼Œè‡ªåŠ¨è¯†åˆ«éœ€è¦ä¿®å‰ªçš„ææ¡ç±»å‹å¹¶è¾“å‡ºæ¨èåˆ—è¡¨ã€‚è¯¥ç³»ç»Ÿé€‚ç”¨äºç°ä»£æœæ ‘ç²¾å‡†ä¿®å‰ªä»»åŠ¡ï¼Œæå‡æœæ ‘ç®¡ç†æ™ºèƒ½åŒ–æ°´å¹³ã€‚

---

### ğŸ“Œ é¡¹ç›®ç®€ä»‹

è¾“å…¥ä¸€ä¸ªå·²å®Œæˆæ ‘æåˆ†ç±»çš„ç»“æœï¼ˆå¦‚å±‚çº§æ ‡ç­¾ã€ç©ºé—´ç»“æ„ç­‰ï¼‰ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ†æææ¡çš„ç©ºé—´å§¿æ€ã€ç”Ÿé•¿æ–¹å‘å’Œç«äº‰å…³ç³»ï¼Œè¯†åˆ«å‡ºä»¥ä¸‹ä¸‰ç±»å¾…å‰ªæï¼š

* ğŸŸ¥ **èƒŒä¸Šæ**ï¼ˆDorsal branchesï¼‰
* ğŸŸ© **å†…è†›æ/å‘å¿ƒæ**ï¼ˆCentripetal branchesï¼‰
* ğŸŸ¦ **ç«äº‰æ**ï¼ˆCompetitive branchesï¼‰

å¹¶è¾“å‡ºè¿™äº›ææ¡çš„ç©ºé—´ä½ç½®ä¸å±æ€§ä¿¡æ¯ï¼Œä¾›äººå·¥æˆ–æœºå™¨äººä¿®å‰ªä½¿ç”¨ã€‚

---

### ğŸ¯ åŠŸèƒ½ç‰¹æ€§

* âœ… æ”¯æŒä»æ ‘æå±‚çº§åˆ†ç±»ç»“æœä¸­è‡ªåŠ¨è¯†åˆ«å‰ªæå¯¹è±¡
* âœ… å¯è¾“å‡ºå‰ªæå»ºè®®çš„ç©ºé—´ä½ç½®ã€ç±»å‹ä¸å¯¹åº”çš„çˆ¶åˆ†æ”¯ä¿¡æ¯
* âœ… æ¨¡å—åŒ–è®¾è®¡ï¼Œå¯ä¸ä¸‰ç»´é‡å»ºã€æ ‘æåˆ†ç±»æ¨¡å—ç›´æ¥å¯¹æ¥
* âœ… æ”¯æŒæ·»åŠ å‰ªæè§„åˆ™ï¼Œå¦‚è§’åº¦é˜ˆå€¼ã€é‡å åº¦ã€å¯†åº¦é™åˆ¶ç­‰

---

### ğŸ–¼ï¸ ç¤ºä¾‹ç»“æœ

> å¯è§†åŒ–å›¾å¾…è¡¥å……ï¼Œå»ºè®®å±•ç¤ºä¸åŒé¢œè‰²æ ‡è®°ä¸åŒç±»å‹å‰ªæææ¡çš„ç‚¹äº‘ã€‚

---

### ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```bash
Pruning-Recommendation/
â”‚
â”œâ”€â”€ pruning/                         # æ ¸å¿ƒå‰ªæç®—æ³•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ pruning_rules.py             # å‰ªæè§„åˆ™å®ç°
â”‚   â””â”€â”€ pruning_recommender.py       # å‰ªææ¨èä¸»é€»è¾‘
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ branch_hierarchy.json        # è¾“å…¥ï¼šæ ‘æå±‚çº§åˆ†ç±»ç»“æ„
â”‚   â””â”€â”€ skeleton_points.ply          # è¾“å…¥ï¼šéª¨æ¶ç»“æ„ç‚¹äº‘
â”‚
â”œâ”€â”€ results/
â”‚   â””â”€â”€ pruning_result.json          # è¾“å‡ºï¼šå‰ªæå»ºè®®æ•°æ®
â”‚
â”œâ”€â”€ run.py                           # ä¸€é”®è¿è¡Œè„šæœ¬
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

---

### âš™ï¸ ç¯å¢ƒå®‰è£…

```bash
python -m venv venv
venv\Scripts\activate  # æˆ– source venv/bin/activate
pip install -r requirements.txt
```

---

### ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
python run.py --input ./data/branch_hierarchy.json --output ./results/
```

---

### ğŸ“¤ è¾“å‡ºè¯´æ˜

è¾“å‡ºæ–‡ä»¶ï¼š`results/pruning_result.json`

```json
[
  {
    "branch_id": 17,
    "type": "dorsal",
    "parent_branch": 4,
    "length": 0.28,
    "angle_with_parent": 125.3,
    "start_point": [1.34, 2.25, 0.84]
  },
  ...
]
```

å­—æ®µè¯´æ˜ï¼š

| å­—æ®µå                 | å«ä¹‰                                            |
| ------------------- | --------------------------------------------- |
| `branch_id`         | è¢«å‰ªææ¡çš„å”¯ä¸€ ID                                    |
| `type`              | å‰ªæç±»å‹ï¼š`dorsal` / `centripetal` / `competitive` |
| `parent_branch`     | æ‰€å±ä¸Šçº§ææ¡ ID                                     |
| `angle_with_parent` | ä¸çˆ¶æå¤¹è§’ï¼ˆç”¨äºåˆ¤æ–­å§¿æ€ï¼‰                                 |
| `start_point`       | ææ¡èµ·ç‚¹åæ ‡ï¼ˆä¿®å‰ªå®šä½ï¼‰                                  |

---

### âœ‚ï¸ å‰ªæè§„åˆ™è¯´æ˜ï¼ˆé»˜è®¤ï¼‰

| ç±»å‹  | åˆ¤å®šä¾æ®ï¼ˆç¤ºä¾‹ï¼‰               |
| --- | ---------------------- |
| èƒŒä¸Šæ | ä¸ä¸»å¹²å‘ä¸Šç”Ÿé•¿ï¼Œå¤¹è§’ > 120Â°ï¼Œä½ç½®é ä¸Š |
| å‘å¿ƒæ | æœå‘ä¸»å¹²ä¸­å¿ƒç”Ÿé•¿ï¼Œå†…è†›åŒºåŸŸå¯†é›†        |
| ç«äº‰æ | ä¸ä¸»æåŒæ–¹å‘ã€é•¿åº¦æ¥è¿‘ã€è§’åº¦å°äº20Â°    |

å¯æ ¹æ®æ ‘ç§å’Œç®¡ç†ç­–ç•¥ä¿®æ”¹ `pruning_rules.py` è‡ªå®šä¹‰è§„åˆ™ã€‚

---

### ğŸ§ª å•å…ƒæµ‹è¯•

```bash
pytest tests/
```

---

### ğŸ”— ä¸Šæ¸¸ä¾èµ–é¡¹ç›®

* [Tree-Branch-Classification](https://github.com/jokermaster83/Tree-Branch-Classification)ï¼šæä¾›ææ¡å±‚çº§ç»“æ„ä¸æ‹“æ‰‘ä¿¡æ¯

---

### ğŸ§‘â€ğŸ’» ä½œè€…ä¿¡æ¯

* Author: **é¾šæ–‡ä¿Š Gong Wenjun**
* GitHub: [@jokermaster83](https://github.com/jokermaster83)
* Email: `3430387198@qq.com`

---

### ğŸ“œ License

MIT License


